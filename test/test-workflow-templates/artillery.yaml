kind: TestWorkflowTemplate
apiVersion: testworkflows.testkube.io/v1
metadata:
  name: pre-official--artillery
  labels:
    testkube.io/name: Artillery
    testkube.io/wizard: enabled
  annotations:
    testkube.io/categories: Load & Performance
    testkube.io/description: Run Artillery tests
    testkube.io/icon: artillery
spec:
  config:
    version:
      description: Artillery version to use
      type: string
      default: 2.0.9
    artillery_binary:
      description: Artillery binary path
      type: string
      default: "/home/node/artillery/bin/run" # "run", or "artillery" (for older images)
    run:
      description: Run command
      type: string
      default: "artillery run"
  steps:
  - name: Run Artillery tests
    container:
      image: artilleryio/artillery:{{ config.version }}
    shell: |
      artillery() { {{ config.artillery_binary }} $@; }
      {{ config.run }}
