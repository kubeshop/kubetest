"use strict";(self.webpackChunktestkube_documentation=self.webpackChunktestkube_documentation||[]).push([[6212],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var s=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=s.createContext({}),u=function(e){var t=s.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return s.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},d=s.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=u(n),f=a,m=d["".concat(l,".").concat(f)]||d[f]||p[f]||r;return n?s.createElement(m,i(i({ref:t},c),{},{components:n})):s.createElement(m,i({ref:t},c))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var u=2;u<r;u++)i[u]=n[u];return s.createElement.apply(null,i)}return s.createElement.apply(null,n)}d.displayName="MDXCreateElement"},34127:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>u});var s=n(87462),a=(n(67294),n(3905));const r={},i="Creating Test Suites",o={unversionedId:"articles/creating-test-suites",id:"articles/creating-test-suites",title:"Creating Test Suites",description:"A large IT department has a frontend team and a backend team, everything is",source:"@site/docs/articles/creating-test-suites.md",sourceDirName:"articles",slug:"/articles/creating-test-suites",permalink:"/articles/creating-test-suites",draft:!1,editUrl:"https://github.com/kubeshop/testkube/tree/develop/docs/docs/articles/creating-test-suites.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Adding Timeouts",permalink:"/articles/adding-timeout"},next:{title:"Running Test Suites",permalink:"/articles/running-test-suites"}},l={},u=[{value:"Passing Test Suite Artifacts between Steps",id:"passing-test-suite-artifacts-between-steps",level:2},{value:"Test Suite Creation",id:"test-suite-creation",level:2}],c={toc:u};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,s.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"creating-test-suites"},"Creating Test Suites"),(0,a.kt)("p",null,"A large IT department has a frontend team and a backend team, everything is\ndeployed on Kubernetes clusters, and each team is responsible for its part of the work. The frontend engineers test their code using the Cypress testing framework, but the backend engineers prefer simpler tools like Postman. They have many Postman collections defined and want to run them against a Kubernetes cluster but some of their services are not exposed externally."),(0,a.kt)("p",null,"A QA leader is responsible for release trains and wants to be sure that before the release all tests are completed successfully. The QA leader will need to create pipelines that orchestrate each teams' tests into a common platform."),(0,a.kt)("p",null,"This is easily done with Testkube. Each team can run their tests against clusters on their own, and the QA manager can create test resources and add tests written by all teams."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Test Suites")," stands for the orchestration of different test steps, which can run sequentially and/or in parallel.\nOn each batch step you can define either one or multiple steps such as test execution, delay, or other (future) steps.\nBy default the concurrency level for parallel tests is set to 10, you can redefine it using ",(0,a.kt)("inlineCode",{parentName:"p"},"--concurency")," option for CLI command."),(0,a.kt)("h2",{id:"passing-test-suite-artifacts-between-steps"},"Passing Test Suite Artifacts between Steps"),(0,a.kt)("p",null,"In some scenarios you need to access artifacts generated on previous steps of the test suite. Testkube provides two options to define which artifacts to download in the init container: all previous step artifacts or artifacts for selected steps (step number is started from 1) or artifacts for latest executions of previously executed tests (identified by names). All downloaded artifacts are stored in /data/downloaded-artifacts/{execution id} folder. See a few examples below."),(0,a.kt)("h2",{id:"test-suite-creation"},"Test Suite Creation"),(0,a.kt)("p",null,"Creating tests is really simple - create the test definition in a JSON file and pass it to the ",(0,a.kt)("inlineCode",{parentName:"p"},"testkube")," ",(0,a.kt)("inlineCode",{parentName:"p"},"kubectl")," plugin."),(0,a.kt)("p",null,"An example test file could look like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},'echo \'\n{\n    "name": "testkube-suite",\n    "description": "Testkube test suite, api, dashboard and performance",\n    "steps": [\n        {"execute": [{"test": "testkube-api"}, {""test": "testkube-dashboard"}]},\n        {"execute": [{"delay": "1s"}]},\n        {"downloadArtifacts": {"previousTestNames": ["testkube-api"]}, "execute": [{"test": "testkube-dashboard"}, {"delay": "1s"}, {""test": "testkube-homepage"}]},\n        {"execute": [{"delay": "1s"}]},\n        {"downloadArtifacts": {"previousStepNumbers": [1, 3]}, "execute": [{"test": "testkube-api-performance"}]},\n        {"execute": [{"delay": "1s"}]},\n        {"downloadArtifacts": {"allPreviousSteps": true}, "execute": [{"test": "testkube-homepage-performance"}]}\n    ]\n}\' | kubectl testkube create testsuite\n')),(0,a.kt)("p",null,"To check if the test was created correctly, you can look at ",(0,a.kt)("inlineCode",{parentName:"p"},"TestSuite")," Custom Resource in your Kubernetes cluster:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"kubectl get testsuites -ntestkube\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh",metastring:'title="Expected output:"',title:'"Expected','output:"':!0},"NAME                  AGE\ntestkube-suite           1m\ntestsuite-example-2   2d21h\n")),(0,a.kt)("p",null,"To get the details of a test:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"kubectl get testsuites -ntestkube testkube-suite -oyaml\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="Expected output:"',title:'"Expected','output:"':!0},'apiVersion: tests.testkube.io/v3\nkind: TestSuite\nmetadata:\n  creationTimestamp: "2022-01-11T07:46:12Z"\n  generation: 4\n  name: testkube-suite\n  namespace: testkube\n  resourceVersion: "57695094"\n  uid: ea90a79e-bb46-49ee-a3ef-a5d99cee0a2c\nspec:\n  description: "Testkube test suite, api, dashboard and performance"\n  steps:\n  - stopOnFailure: false\n    execute:\n    - test: testkube-api\n    - test: testkube-dashboard\n  - stopOnFailure: false\n    execute:\n    - delay: 1s\n  - stopOnFailure: false\n    downloadArtifacts:\n      allPreviousSteps: false\n      previousTestNames:\n      - testkube-api\n    execute:\n    - test: testkube-dashboard\n    - delay: 1s\n    - test: testkube-homepage\n  - stopOnFailure: false\n    execute:\n    - delay: 1s\n  - stopOnFailure: false\n    downloadArtifacts:\n      allPreviousSteps: false\n      previousStepNumbers:\n      - 1\n      - 3\n    execute:\n    - test: testkube-api-performance\n  - stopOnFailure: false\n    execute:\n    - delay: 1s\n  - stopOnFailure: false\n    downloadArtifacts:\n      allPreviousSteps: true\n    execute:\n    - test: testkube-homepage-performance\n')),(0,a.kt)("p",null,"Your ",(0,a.kt)("inlineCode",{parentName:"p"},"Test Suite")," is defined and you can start running testing workflows."))}p.isMDXComponent=!0}}]);