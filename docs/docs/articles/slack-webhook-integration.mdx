# Integrating with Slack

We will use webhooks in order to receive notifications in Slack about the status of the testing process.

## Step 1 - Create an incoming Webhook Slack app

The first step is to generate an incoming webhook URL in Slack that you can use later. If you already have an incoming webhook you may use that.

1. Go to https://api.slack.com/apps and click Create a new Slack App.
2. Provide an App Name and choose the right workspace.
3. Once created, go to Incoming Webhooks.
4. Turn on Activate Incoming Webhooks and also click Add New Webhook to Workspace.
5. Choose a Slack channel to post the survey responses to.
6. Copy the Webhook URL.

## Step 2 - Configure Testkube to send data to the Slack Webhook.

In the second step we are going to use Testkube webhooks to send data to the newly created Slack App.

1. Go to the Webhooks sections and create a new Webhook.
2. Provide a Webhook name and select the resources and events you want to be triggering this Webhook.
3. Enter the Slack Webhook URL as the Action in the next step and save your Webhook.
4. Go to the Action Tab in the settings of your newly created Webhook and adapt the custom payload you are sending to Slack. (See a working example below)
5. Save your Webhook and trigger a test run on a test which matches the criteria from the second step above. You should see the result posted to slack.

## Sample Custom Payload

Use this custom payload in your Webhook to generate a nice Slack message. You can also learn more about Webhooks and available placeholder variables in our Webhook reference.

```json
{
	"attachments": [
		{
			"color": "{{ if eq .Type_.String "start-test" }}0EA5E9{{ else if  eq .Type_.String "end-test-success"}}84CC16{{ else }}EC4899{{ end }}",
			"blocks": [
				{
					"type": "divider"
				},
				{
					"type": "section",
					"text": {
						"type": "mrkdwn",
						"text": "*<https://app.testkube.io/organization/{{ index .Envs "TESTKUBE_CLOUD_ORG_ID" }}/environment/{{ index .Envs "TESTKUBE_CLOUD_ENV_ID" }}/dashboard/tests/{{ .TestExecution.TestName }}/executions/{{ .TestExecution.Id }}|{{ .TestExecution.TestName }}>*\n*Labels*: {{ range $key, $value := .TestExecution.Labels }}`{{ $key }}:{{ $value }}` {{ end }}\n*Execution ID*: {{ .TestExecution.Id }}\n*Event*: {{ .Type_ }}{{ if .TestExecution.Duration }}\n*Duration*: {{ .TestExecution.Duration }}{{ end }}\n*Run Trigger*: {{ index .TestExecution.RunningContext }}"
					},
					"accessory": {
						"type": "image",
						"image_url": "http://docs.testkube.io/img/test-status/{{ .Type_ }}.png",
						"alt_text": "test status"
					}
				},
				{
					"type": "divider"
				}
			]
		}
	]
}
```
